<!DOCTYPE html>
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">

<link rel="import" href="../bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">

<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">

<link rel="import" href="../bower_components/nickel-elements/nickel-storage-collection.html">

<link rel="import" href="../bower_components/nickel-elements/nickel-screen.html">
<link rel="import" href="./page-transition-behavior.html">

<!--Imports go here-->

<dom-module id="storage-markup-demo">

   <template>
      <style is="custom-style">
         :host {
            display: block;
            @apply(--layout-vertical);
            --paper-toolbar-title: {
               font-family: "Roboto";
               font-size: 20px;
               height: 24px;
            }
         }

         nickel-screen {
            --filler-background: #3f51b5;
         }

         paper-material {
            padding: 14px;
            margin: 10px 10px;
         }

         paper-fab {
            position: absolute;
            bottom: 20px;
            right: 20px;
         }

         .empty-message {
            font-family: "Roboto";
            color: #aaaaaa;
            font-style: italic;
            font-weight: lighter;
         }

         #container {
            overflow: auto;
            -webkit-overflow-scrolling: touch;
         }

         .object-label {
            font-family: "Roboto";
            font-size: 16px;
            margin: 2px;
         }
      </style>



      <nickel-screen>
         <div class="fit layout vertical">
            <paper-toolbar>
               <div class="title">Storage Markup Demo</div>
            </paper-toolbar>

            <div id="container" class="flex" hidden$={{objectsEmpty(objects)}}>
               <template is="dom-repeat" items="[[objects]]" as="obj">
                  <paper-material elevation="2" on-click="_editObject">
                     <div class="object-label">{{obj.label}}</div>
                  </paper-material>
               </template>
            </div>
            <div class="flex layout horizontal center center-justified" hidden$={{!objectsEmpty(objects)}}>
               <div class="empty-message">Start by adding a new element!</div>
            </div>
            <paper-fab id="fabButton" class="self-end" icon="icons:add" on-click="_storeObject"></paper-fab>
            <paper-toast id="toast" text="Data updated!" duration="1000"></paper-toast>
      </nickel-screen>
      </div>
   </template>

   <script>
      "use strict";
      Polymer({
         is: "storage-markup-demo",
         behaviors: [
            PageTransitionBehavior
         ],
         properties: {

            objects: {
               type: Array,
               value: []
            },



         },
         ready: function() {

            this.sharedElements = {
               'ripple': this.$.fabButton,
               'reverse-ripple': this.$.fabButton
            }

            this.animationConfig = {};

            this.animationConfig.entry = [{
               name: 'reverse-ripple-animation',
               id: 'reverse-ripple',
               toPage: this
            }];

            this.animationConfig.exit = [{
               name: 'ripple-animation',
               id: 'ripple',
               fromPage: this
            }];

         },

         objectsEmpty: function() {
            return this.objects.length === 0;
         },

         _storeObject: function(e) {
            this.startRippleTransition(e, this.$.fabButton);
            this.fire("add-object");

         },
         _editObject: function(e) {
            var item = e.model.obj;
            this.fire('edit-object', item)
         },

         _dataUpdated: function(e) {
            this.$.toast.open();
         }
      });
   </script>

</dom-module>
